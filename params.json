{
  "name": "Tlapser360 for RICOH THETA",
  "tagline": "Use a USB cable or WiFi to shoot time lapse 360 photos with the RICOH THETA",
  "body": "![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/jason-charcalla-spotlight.png)\r\n\r\nOriginal repository is here\r\nhttps://github.com/jcharcalla/tlapser360\r\n\r\n# tlapser360\r\nUsed to shoot time lapse 360 photos with cameras that support the Open Spherical Camera API.\r\n\r\nThis is a proof of concept script I wrote to run on  a raspberry pi with a Ricoh Theta S camera. I initially wrote this as an attempt to get my Theta S camera to shoot stills faster than using the built in intervalometer. In testing I was able to shave about 2 seconds from the shooting time, This however only seems to work using WIFI and not the USB. It also supports geotaging with gpsd and camera metering via an adafruit LUX meter. Metering features are still a work in progress and require a familiarity with the Raspberry pi GPIO interface. With metering enabled you can force the exposure to ramp in a single direction, this is useful for things like sunrise and sunset. Communication with the camera can be done with via wifi or usb. USB features are new and with the rest of the script are experimental, I've had problems with my camera becoming un-responsive and needing power cycling. If you do not need the GPS or metered exposure settings of this script and only want the ability to capture, download, and delete images from the camera you may want to look at using ptpcam alone 'ptpcam --loop-capture=5 --interval=3'.\r\n\r\n\r\nEarly test footage can be found here: https://www.youtube.com/watch?v=IugTnvYjy6A\r\n\r\nUse at your own risk!\r\n\r\n\r\n### Prereqs:\r\n\r\n- GPS support relies on gpsd and gpsd-clients being installed and configured.\r\n\r\n- The bc package is needed for maths.\r\n\r\n- LUX meter support was tested with a adafruit TSL2561 and some tweaks to IainColledge's\r\n  example script. See this variable \"LUX_METER_SCRIPT\"\r\n  https://github.com/IainColledge/Adafruit-Raspberry-Pi-Python-Code\r\n\r\n- Theta s Usb support with libptp, Thanks to codetricity for the howto\r\n  http://lists.theta360.guide/t/ricoh-theta-s-api-over-usb-cable/65/3\r\n\r\n\r\n\r\n### Usage:\r\n\r\n- -I (Interval seconds) : This sets the sleep interval time between photos. Be aware this does not take into consideration any latency added by features of this script such as image downloads, usb control, gps metat data injection, ilong exposures, etc. This means if you set a 10 second interval your photos may be taken every 12 seconds. You can also set this to a lower threshold than the Ricoh Theta S can shoot using it's built in intervalometer. In testing I've been able to shoot a photo ever 3 seconds in low resolution and 5 seconds in high res without over running the on cammera buffer.\r\n- -U (y/n) default n. Usb mode for Ricoh Theta S. This will control the camera over usb and requires libptp and gphoto2.\r\n- -W (y/n) Default y Wifi mode unless USB mode is enabled. Control the camera using the direct wifi connection and Opens Spherical camera API.\r\n- -C (Image count) How many total images you would like to take.\r\n- -m (Exposure Program mode 1 2 4 9) 1 for Auto, 2 for Manual\r\n- -G (0/1) GPS metadata injection. This relies on GPSD being installed and properly configured. It may also introduce latency so adjust your interval accordingly.\r\n- -T (GPS Track log path and file name) Write a gps track log, relies on GPSD.\r\n- -r (h/l) Image resolution size h=5376x2688 l=2048x1024 Set the resolution of the image. I may depricate this and use -K.\r\n- -i (iso) Camera iso ex. 100, 125, 160, 200, 250, 320, 400, 500, 640, 800, 1000, 1250, 1600\r\n- -s (shutter speed) Floating point or integer, based on wifi api. ie 0.0004=1/2500, 0.04=1/25, 0.4=1/2.5, 4=4 seconds.\r\n- -w (White Balance) In WIFI mode (auto, daylight, shade, etc) USB mode in hex? (2, 4 ,8001) Check the api guides for details. [WiFi v2.0](https://developers.theta360.com/en/docs/v2.0/api_reference/options/white_balance.html)\r\n- -O (Output path /) Path to where you would like output image files.\r\n- -d (0/1) if images are downloaded delete them from the camera.\r\n- -F Config file - NOT SUPPORTED YET\r\n- -M (0/1) use a TSL2561 LUX sensor for metering. if used we will add time to your interval\r\n- -R Ramp exposure speed up (longer shutter - Sunset) or down (shorter/faster shutter - Sunrise) based on external LUX meter.\r\n- -A (time) Sunrise time (24hr no : ex, 6:00AM=600) -P Sunset time (24hr no \":\" ex, 7:00PM=1900)\r\n\r\n#### Example:\r\n- Using USB take a large resolution photo every 5 seconds for a total of 5 images with the camera set to manual mode, iso 100, white balance auto, and a shutter speed of .5 seconds while writing the images to a directory and leaving them on the camera..\r\n\r\n```\r\n./tlapser360.sh -U y -I 5 -C 5 -m 1 -r h -i 100 -s 0.5 -w 2 -O /mnt/tmp/tlapser_test/\r\n```\r\nCopyright 2016 - Jason Charcalla\r\n\r\n--\r\n\r\nAdded by THETA360\r\n\r\n## Using Wifi Connection From Laptop\r\nIf you are running this on a Mac laptop, you need to set the script to WiFi with the capital _W_ flag `-W`. You'll also need to adjust the\r\n[whiteBalance](https://developers.theta360.com/en/docs/v2.0/api_reference/options/white_balance.html). This command works with WiFi.\r\n\r\n```\r\n./tlapser360.sh -W y -I 5 -C 5 -m 1 -r h -i 100 -s 0.5 -w auto -O /mnt/tmp/tlapser_test/\r\n```\r\n\r\nIn the example above, the\r\n[whiteBalance](https://developers.theta360.com/en/docs/v2.0/api_reference/options/white_balance.html) is set to auto. You can replace _auto_ with these parameters. That is a lowercase _w_ in front of _auto_.\r\n\r\n* auto: Auto\r\n* daylight: Outdoor\r\n* shade: Shade\r\n* cloudy-daylight: Cloudy\r\n* incandescent: Incandescent light 1\r\n* _warmWhiteFluorescent: Incandescent light 2\r\n* _dayLightFluorescent: Fluorescent light 1 (daylight)\r\n* _dayWhiteFluorescent: Fluorescent light 2 (natural white)\r\n* fluorescent: Fluorescent light 3 (white)\r\n* _bulbFluorescent: Fluorescent light 4 (light bulb color)\r\n\r\nThere is a [discussion](http://lists.theta360.guide/t/external-intervalometer/579?u=codetricity) of using this script on a Mac OS laptop.\r\n\r\n## Parts\r\n[Adafruit TSL2561 Digital Luminosity/Lux/Light Sensor Breakout](https://www.adafruit.com/products/439) $5.95\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/lux.png)\r\n\r\n## Sample Screen Grabs\r\n\r\nThese are screen grabs from the YouTube video. The original resolution of the images is higher. The lux sensor above is\r\nadjusting the camera.\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/dawn.png)\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/morning.png)\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/day.png)\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/dusk.png)\r\n\r\nIn the screengrab below, I changed the 360 view up to illustrate that at any time you can look up or turn the video around and see the view behind you.\r\n\r\n![](https://raw.githubusercontent.com/theta360developers/tlapser360/master/img/stars.png)\r\n\r\n\r\n## Discussion\r\n[Discussion](http://community.theta360.guide/t/live-leaf-peeping-digital-repeat-photography/507/10?u=codetricity)\r\n\r\n\r\n![Analytics](https://ga-beacon.appspot.com/UA-73311422-5/tlapser360)\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}